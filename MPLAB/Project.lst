MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         PROCESSOR 16F877A
                      00002         INCLUDE "P16F877A.INC"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F877A processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00566         LIST
                      00003 
                      00004 
2007   3731           00005         __CONFIG 0x3731
                      00006 
                      00007 
                      00008         errorlevel -302, -305
                      00009 
  00000021            00010 Char                            EQU 0x21
                      00011 
  00000020            00012 TCNT                            EQU     0x20    ; Variable to count 123 interrupts for 2 second.
  0000001E            00013 NUM_OF_OVERFLOWS        EQU D'30'       ; 123
  00000022            00014 CURSOR_POS                      EQU 0x22        ; 0x8- for first row, 0xC- for second row
                      00015 
  00000023            00016 DIG_VAL                         EQU 0x23        ; to store current digit value
  00000024            00017 HAS_MAX                         EQU 0x24        ; indicate whether this digit is limited by an upper lim
                            it (65535) : Y:0xFF, N: 0x00
  00000025            00018 IS_MAX                          EQU 0x25        ; to store whether the current digit is at its limit (65
                            535) : Y:0xFF, N: 0x00
  00000026            00019 MAX_ARR_IND                     EQU 0x26        ; array to hold the upper limits of each digit
                      00020                                                                 ; from address 0x26 till 0x2A
  0000002B            00021 CURR_ARR_IND            EQU 0x2B        ; address of current index of the array
                      00022 
  0000002C            00023 NUM1_HIGH                       EQU 0x2C        ; to store the first number high byte
  0000002D            00024 NUM1_LOW                        EQU 0x2D        ; to store the first number low byte
                      00025 
  0000002E            00026 NUM2_HIGH                       EQU 0x2E        ; to store the first number high byte
  0000002F            00027 NUM2_LOW                        EQU 0x2F        ; to store the first number low byte
                      00028 
  00000030            00029 DIG_CNT                         EQU 0x30        ; to indicate the current digit index
                      00030 
  00000031            00031 IS_EQ                           EQU 0x31        ; store XOR reult of two numbers
  00000032            00032 LOOP_CNT                        EQU 0x32        ; to store loop count
  00000033            00033 TEMP                            EQU 0x33
  00000034            00034 CURR_DISPLAY            EQU 0x34        ; 0: NUM1, 1: OP, 2: NUM2, 3: RES, 4:keep,
                      00035                                                                 ; 5: op_after_keep
  0000003A            00036 CLICK_CNT                       EQU 0x3A        ; #of click in keep stage
                      00037 
                      00038 
  00000035            00039 OP_ARR                          EQU 0x35        ; Array from 0x35 to 0x37
  00000037            00040 OP_ARR_TAIL                     EQU 0x37
  00000038            00041 OP_ARR_IND                      EQU 0x38        ; index to OP_ARR
  00000039            00042 OP                                      EQU 0x39        ; to store operation (0: +, 1: /, 2: %)
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00043 ; 0x3A
                      00044 
  0000003B            00045 NUMERATOR_HIGH          EQU 0x3B
  0000003C            00046 NUMERATOR_LOW           EQU 0x3C
  0000003D            00047 DENOMINATOR_HIGH        EQU 0x3D
  0000003E            00048 DENOMINATOR_LOW         EQU 0x3E
  0000003F            00049 COMP_DENOMINATOR_HIGH   EQU 0x3F
  00000040            00050 COMP_DENOMINATOR_LOW    EQU 0x40
  00000041            00051 QUOTIENT_HIGH           EQU 0x41
  00000042            00052 QUOTIENT_LOW            EQU 0x42
  00000043            00053 REMAINDER_HIGH          EQU 0x43
  00000044            00054 REMAINDER_LOW           EQU 0x44
                      00055 
                      00056 
  00000045            00057 TENS_ARR                        EQU 0x45        ; array to store the binary represntations of tens
                      00058                                                                 ; from address 0x50 till 0x59
  00000050            00059 CURR_TENS_ARR_IND       EQU 0x50        ; address of the current address of the array
  00000051            00060 TENS_TEMP                       EQU 0x51        ;
                      00061 
  00000052            00062 OPERAND1_HIGH           EQU 0x52
  00000053            00063 OPERAND1_LOW            EQU 0x53
  00000054            00064 OPERAND2_HIGH           EQU 0x54
  00000055            00065 OPERAND2_LOW            EQU 0x55
  00000056            00066 RESULT1_HIGH            EQU 0x56
  00000057            00067 RESULT1_LOW                     EQU 0x57
  00000058            00068 RESULT2_HIGH            EQU 0x58
  00000059            00069 RESULT2_LOW                     EQU 0x59
  0000005A            00070 FLAG_REGISTER           EQU 0x5A
  00000000            00071 CARRY_FLAG                      EQU 0x0
  0000005B            00072 D5                                      EQU 0x5B
  0000005C            00073 D4                                      EQU 0x5C
  0000005D            00074 D3                                      EQU 0x5D
  0000005E            00075 D2                                      EQU 0x5E
  0000005F            00076 D1                                      EQU 0x5F
  00000060            00077 TEMP2                           EQU     0x60
  00000061            00078 DIV_FLAG                        EQU 0x61
                      00079 
                      00080 
                      00081 
                      00082 
                      00083 
                      00084 ; The instructions should start from here
0000                  00085         ORG     0x00
0000   2805           00086         GOTO    init
                      00087 
                      00088 
0004                  00089         ORG     0x04
0004   282A           00090         GOTO    ISR
                      00091 
                      00092 ;=================================================================================
                      00093 ; Program Initialization
                      00094 ;=================================================================================
0005                  00095 init:
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00096 
                      00097         ;; initialize TCNT
0005   1283 1303      00098         BANKSEL PORTA                           ; move to Bank 0
0007   301E           00099         MOVLW   NUM_OF_OVERFLOWS
0008   00A0           00100         MOVWF   TCNT                            ; TCNT = NUM_OF_OVERFLOWS
                      00101 
                      00102         ;; initialize upper_limit array
0009   2148           00103         CALL    INIT_MAX_ARR
                      00104 
                      00105         ;; Setting pins and variables
                      00106         ;; RB0 for button input
000A   1683 1303      00107         BANKSEL TRISD                           ; move to Bank 1
000C   1406           00108         BSF     TRISB, TRISB0           ; Set RB0 as input
                      00109 
                      00110 
                      00111         ;;setting Timer 0
000D   3007           00112         MOVLW   b'00000111'                     ; set Timer0 prescaler to 256 (tick each 64us)
000E   0081           00113         MOVWF   OPTION_REG                      ; move value to OPTION_REG
                      00114 
                      00115         ;; Enable interrupts
000F   1283 1303      00116         BANKSEL INTCON
0011   178B           00117         BSF     INTCON, GIE                     ; Enable global interrupts
0012   168B           00118         BSF     INTCON, TMR0IE          ; Enable Timer0 interrupts
0013   160B           00119         BSF     INTCON, INTE            ; Enable RB0 interrupt
                      00120 
                      00121 
                      00122 
0014   1283 1303      00123         BANKSEL PORTD                           ; Move to Bank 0
0016   30C0           00124         MOVLW   0xC0
0017   00A2           00125         MOVWF   CURSOR_POS                      ; CURSOR_POS variable at the first column of the second 
                            row
                      00126 
0018   01A3           00127         CLRF    DIG_VAL                         ; DIG_VAL = 0
0019   01B4           00128         CLRF    CURR_DISPLAY            ; CURR_DISPLAY = NUM1 (0)
001A   01B0           00129         CLRF    DIG_CNT                         ; DIG_CNT = 0
001B   01A5           00130         CLRF    IS_MAX                          ; IS_MAX = 0
                      00131 
001C   01A4           00132         CLRF    HAS_MAX
001D   09A4           00133         COMF    HAS_MAX, F                      ; HAS_MAX = 0xFF (First digit has alwayas an upperlimit 
                            of 6)
                      00134 
001E   01B9           00135         CLRF    OP                                      ; OP = 0 (+)
001F   21AF           00136         CALL    INIT_OP_ARR
                      00137 
0020   01BA           00138         CLRF    CLICK_CNT                       ;
                      00139 
0021   01AC           00140         CLRF    NUM1_HIGH                       ;
0022   01AD           00141         CLRF    NUM1_LOW                        ;
0023   01AE           00142         CLRF    NUM2_HIGH                       ;
0024   01AF           00143         CLRF    NUM2_LOW                        ;
                      00144 
                      00145         ;; initialize TENS_ARR
0025   22BC           00146         CALL    INIT_TENS_ARR           ;
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0026   01DA           00147         CLRF    FLAG_REGISTER
                      00148 
                      00149 
0027   1283 1303      00150         BANKSEL PORTD                           ; Move to Bank 0
                      00151 
0029   28E9           00152         GOTO    start
                      00153 ;=================================================================================
                      00154 ; END OF Program Initialization
                      00155 ;=================================================================================
                      00156 
                      00157 
                      00158 ;=================================================================================
                      00159 ; Interrup Service Routine
                      00160 ;=================================================================================
002A                  00161 ISR:
002A   1283 1303      00162         BANKSEL INTCON
                      00163 
002C                  00164 CHECK_BUTTON:
002C   188B           00165         BTFSC   INTCON, INTF            ; Check if button int
002D   2833           00166         GOTO    BUTTON_INT
                      00167 
002E                  00168 CHECK_TIMER:
002E   190B           00169         BTFSC   INTCON, TMR0IF          ; Check if timer int
002F   2851           00170         GOTO    TIMER_INT
                      00171 
0030   1283 1303      00172         BANKSEL PORTD
0032   0009           00173         retfie
                      00174 
                      00175         ;--------------------------------------------------------------------
                      00176         ; Button Interrupt
                      00177         ;--------------------------------------------------------------------
0033                  00178 BUTTON_INT:
0033   1283 1303      00179         BANKSEL INTCON
0035   108B           00180         BCF     INTCON, INTF            ; Clear the raised interrupt bit
0036   120B           00181         BCF     INTCON, INTE            ; Disable button interrupt
                      00182 
0037   1283 1303      00183         BANKSEL PORTD                           ; Move to Bank 0
                      00184 
0039   301E           00185         MOVLW   d'30'
003A   2099           00186         CALL    xms
003B   1806           00187         BTFSC   PORTB, RB0                      ; if button is still pressed
003C   282E           00188         GOTO    CHECK_TIMER
                      00189         ;; if displaying the result
003D   3003           00190         MOVLW   D'3'
003E   0634           00191         XORWF   CURR_DISPLAY, W
003F   1903           00192         BTFSC   STATUS, Z
0040   284D           00193         GOTO    BACK_B
                      00194 
                      00195         ;; if displaying the result
0041   3006           00196         MOVLW   D'6'
0042   0634           00197         XORWF   CURR_DISPLAY, W
0043   1903           00198         BTFSC   STATUS, Z
0044   284D           00199         GOTO    BACK_B
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00200 
0045   3004           00201         MOVLW   D'4'
0046   0634           00202         XORWF   CURR_DISPLAY, W
0047   1903           00203         BTFSC   STATUS, Z
0048   2A42           00204         GOTO    CHECK_CLICKS
                      00205 
                      00206 
                      00207 
0049   1834           00208         BTFSC   CURR_DISPLAY,0          ; if CURR_DISPLAY is 0 or 2, it is a number display
004A   218B           00209         CALL    INC_OP                          ; change operation
                      00210 
                      00211 
004B   1C34           00212         BTFSS   CURR_DISPLAY,0
004C   215C           00213         CALL    INC_DIGIT                       ; increment digit
                      00214 
                      00215 
004D                  00216 BACK_B:
                      00217 
004D   1283 1303      00218         BANKSEL INTCON
004F   160B           00219         BSF     INTCON, INTE            ; Enable button interrupt
                      00220 
0050   282E           00221         GOTO    CHECK_TIMER                     ; Check Timer0 interrupt
                      00222         ;--------------------------------------------------------------------
                      00223         ; END OF Button Interrupt
                      00224         ;--------------------------------------------------------------------
                      00225 
                      00226         ;--------------------------------------------------------------------
                      00227         ; Timer0 Interrupt
                      00228         ;--------------------------------------------------------------------
0051                  00229 TIMER_INT:
0051   1283 1303      00230         BANKSEL INTCON
0053   110B           00231         BCF     INTCON, TMR0IF          ; clear ov bit
0054   128B           00232         BCF     INTCON, TMR0IE          ; Disable timer0 interrupt
                      00233 
                      00234 
0055   1283 1303      00235         BANKSEL PORTA                           ; Bank 0
0057   0BA0           00236         DECFSZ  TCNT, F                         ; decrement TCNT and check if zero
0058   288A           00237         GOTO    SKIP_INT_T                      ; skip interrupt handing
                      00238 
                      00239         ;........................................
                      00240         ; Timer0 Interrupt Handling
                      00241         ;........................................
0059                  00242 TIMER_HANDLING:
                      00243 
0059   1283 1303      00244         BANKSEL PORTD
005B   0AA2           00245         INCF    CURSOR_POS                      ; increment cursor position
005C   0AB0           00246         INCF    DIG_CNT                         ; increment digit count
                      00247 
005D   228F           00248         CALL    PROCESS_CURRENT_DIGIT
                      00249         ;; Check if DIG_CNT = 5 (end of the number)
005E   3005           00250         MOVLW   D'5'
005F   0630           00251         XORWF   DIG_CNT, W
                      00252         ;; if not, continue to the next digit
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0060   1D03           00253         BTFSS   STATUS, Z
0061   2A79           00254         GOTO    NEXT_DIGIT
                      00255 
0062   0AB4           00256         INCF    CURR_DISPLAY
0063   01B0           00257         CLRF    DIG_CNT
                      00258 
0064   3003           00259         MOVLW   D'3'                            ; result stage
0065   0634           00260         XORWF   CURR_DISPLAY, W
0066   1903           00261         BTFSC   STATUS, Z
0067   29BD           00262         GOTO    DISPLAY_RESULT
                      00263 
0068   3004           00264         MOVLW   D'4'                            ; keep stage
0069   0634           00265         XORWF   CURR_DISPLAY, W
006A   1903           00266         BTFSC   STATUS, Z
006B   29FB           00267         GOTO    TIMER_KEEP_STAGE
                      00268 
006C   3005           00269         MOVLW   D'5'
006D   0634           00270         XORWF   CURR_DISPLAY, W
006E   1903           00271         BTFSC   STATUS, Z
006F   2A53           00272         GOTO    OP_AFTER_KEEP
                      00273 
0070   3006           00274         MOVLW   D'6'
0071   0634           00275         XORWF   CURR_DISPLAY, W
0072   1903           00276         BTFSC   STATUS, Z
0073   29BD           00277         GOTO    DISPLAY_RESULT
                      00278 
                      00279         ;; Check the current display
0074   1834           00280         BTFSC   CURR_DISPLAY,0          ; if 0 or 2, it's a number
0075   2877           00281         GOTO    NOT_NUM1
                      00282 
0076   2A86           00283         GOTO    FIRST_DIGIT
                      00284 
                      00285         ;; If to display the op
0077                  00286 NOT_NUM1:
0077   3026           00287         MOVLW   MAX_ARR_IND                     ;
0078   00AB           00288         MOVWF   CURR_ARR_IND            ; CURR_ARR_IND will point to the first index of the array
0079   3045           00289         MOVLW   TENS_ARR                        ; ((ADDED))
007A   00D0           00290         MOVWF   CURR_TENS_ARR_IND       ; ((ADDED)) CURR_ARR_IND will point to the first index of the ar
                            ray
007B   3004           00291         MOVLW   D'4'                            ;
007C   00B0           00292         MOVWF   DIG_CNT                         ; DIG_CNT = 4, to be considered as the last character to
                             be displayed in the current display
007D   302B           00293         MOVLW   '+'
007E   21A2           00294         CALL    DISPLAY_OP
                      00295 
007F                  00296 BACK_T:
                      00297 
007F   1283 1303      00298         BANKSEL PORTA                           ; Bank 0
                      00299 
                      00300         ;; Reset Timer
                      00301 
0081   3003           00302         MOVLW   D'3'
0082   0634           00303         XORWF   CURR_DISPLAY, W
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0083   1903           00304         BTFSC   STATUS, Z
0084   2888           00305         GOTO    THREE_SEC_DELAY
                      00306 
0085   301E           00307         MOVLW   NUM_OF_OVERFLOWS
0086   00A0           00308         MOVWF   TCNT                            ; Reset TCNT Counter to NUM_OF_OVERFLOWS
0087   288A           00309         GOTO    SKIP_INT_T
                      00310 
0088                  00311 THREE_SEC_DELAY:
0088   302E           00312         MOVLW   D'46'
0089   00A0           00313         MOVWF   TCNT                            ; Reset TCNT Counter to NUM_OF_OVERFLOWS
                      00314 
                      00315 
                      00316 
008A                  00317 SKIP_INT_T:
                      00318 
008A   1283 1303      00319         BANKSEL TMR0                            ; Bank 0
008C   0181           00320         CLRF    TMR0                            ; clear timer
                      00321 
008D   1283 1303      00322         BANKSEL INTCON
008F   168B           00323         BSF     INTCON, TMR0IE          ; Enable Timer0 interrupt
                      00324 
0090                  00325 INT_END:
                      00326 
0090   1283 1303      00327         BANKSEL PORTD                           ; Bank 0
0092   0009           00328         retfie
                      00329 
                      00330 ;=================================================================================
                      00331 ; END OF Interrup Service Routine
                      00332 ;=================================================================================
                      00333 
                      00334 
                      00335         INCLUDE "LCDIS.INC" ;
                      00001 ;--------------------------------------------------------------
                      00002 ;       LCDIS.INC               MPB     19-12-05
                      00003 ;
                      00004 ;       Include file to operate 16x2 LCD display
                      00005 ;       Uses GPR 70 - 75
                      00006 ;       
                      00007 ;       Final version
                      00008 ;--------------------------------------------------------------
                      00009 
  00000070            00010 Timer1  EQU     0x70            ; 1ms count register
  00000071            00011 TimerX  EQU     0x71            ; Xms count register
  00000072            00012 Var     EQU     0x72            ; Output variable
  00000073            00013 Point   EQU     0x73            ; Program table pointer
  00000074            00014 Select  EQU     0x74            ; Used to set or clear RS bit
  00000075            00015 OutCod  EQU     0x75            ; Temp store for output code
                      00016 
                      00017 
  00000005            00018 E       EQU     5               ; Enable display input
  00000004            00019 RS      EQU     4               ; Register select output bit
                      00020 
                      00021 ;--------------------------------------------------------------
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00022 ;       1ms delay with 1us cycle time (1000 cycles)
                      00023 ;--------------------------------------------------------------
0093   30F9           00024 onems   MOVLW   D'249'          ; Count for 1ms delay 
0094   00F0           00025         MOVWF   Timer1          ; Load count
0095   0000           00026 loop1   NOP                     ; Pad for 4 cycle loop
0096   0BF0           00027         DECFSZ  Timer1          ; Count
0097   2895           00028         GOTO    loop1           ; until Z
0098   0008           00029         RETURN                  ; and finish
                      00030 
                      00031 ;--------------------------------------------------------------
                      00032 ;       Delay Xms
                      00033 ;       Receives count in W, uses Onems
                      00034 ;--------------------------------------------------------------
0099   00F1           00035 xms     MOVWF   TimerX          ; Count for X ms
009A   2093           00036 loopX   CALL    onems           ; Delay 1ms
009B   0BF1           00037         DECFSZ  TimerX          ; Repeat X times 
009C   289A           00038         GOTO    loopX           ; until Z
009D   0008           00039         RETURN                  ; and finish
                      00040 
                      00041 ;--------------------------------------------------------------
                      00042 ;       Generate data/command clock siganl E
                      00043 ;--------------------------------------------------------------
009E   1685           00044 pulseE  BSF     PORTA,E         ; Set E high
009F   2093           00045         CALL    onems           ; Delay 1ms
00A0   2093           00046         CALL    onems           ; Delay 1ms
00A1   2093           00047         CALL    onems           ; Delay 1ms
00A2   2093           00048         CALL    onems           ; Delay 1ms
00A3   2093           00049         CALL    onems           ; Delay 1ms
                      00050 
00A4   1285           00051         BCF     PORTA,E         ; Reset E low
                      00052 
00A5   2093           00053         CALL    onems           ; Delay 1ms
00A6   2093           00054         CALL    onems           ; Delay 1ms
00A7   2093           00055         CALL    onems           ; Delay 1ms
00A8   2093           00056         CALL    onems           ; Delay 1ms
00A9   2093           00057         CALL    onems           ; Delay 1ms
00AA   0008           00058         RETURN                  ; done
                      00059 
                      00060 ;--------------------------------------------------------------
                      00061 ;       Send a command byte in two nibbles from RB4 - RB7
                      00062 ;       Receives command in W, uses PulseE and Onems
                      00063 ;--------------------------------------------------------------
00AB   00F5           00064 send    MOVWF   OutCod          ; Store output code
00AC   39F0           00065         ANDLW   0xF0            ; Clear low nybble
00AD   00F2           00066         MOVWF Var
00AE   0EF2           00067         SWAPF Var
00AF   0872           00068         MOVF Var, w
00B0   0085           00069         MOVWF   PORTA           ; Output high nybble
                      00070 
                      00071 
00B1   1A74           00072         BTFSC   Select,RS       ; Test RS bit
00B2   1605           00073         BSF     PORTA,RS        ; and set for data
                      00074 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B3   209E           00075         CALL    pulseE          ; and clock display register
00B4   2093           00076         CALL    onems           ; wait 1ms for display
                      00077 
00B5   0875           00078         MOVF    OutCod,W        ; Retrieve output code
00B6   390F           00079         ANDLW   0x0F            ; Clear low nybble
00B7   0185           00080         CLRF PORTA
00B8   0085           00081         MOVWF   PORTA           ; Output low nybble
                      00082 
00B9   1A74           00083         BTFSC   Select,RS       ; Test RS bit
00BA   1605           00084         BSF     PORTA,RS        ; and set for data
                      00085 
00BB   209E           00086         CALL    pulseE          ; and clock display register
00BC   2093           00087         CALL    onems           ; wait 1ms for display
00BD   0008           00088         RETURN                  ; done
                      00089 
                      00090 ;--------------------------------------------------------------
                      00091 ;       Initialise the display
                      00092 ;       Uses Send
                      00093 ;--------------------------------------------------------------
00BE   3064           00094 inid    MOVLW   D'100'          ; Load count for 100ms delay
00BF   2099           00095         CALL    xms             ; and wait for display start
00C0   300F           00096         MOVLW   0x0F    ; Mask for select code
00C1   00F4           00097         MOVWF   Select          ; High nybble not masked
                      00098 
                      00099 
00C2   1683 1303      00100         BANKSEL TRISA
00C4   0185           00101         CLRF TRISA
                      00102         
00C5   1283 1303      00103         BANKSEL PORTA
00C7   0185           00104         CLRF PORTA
                      00105         ; to convert to digital outputs
00C8   1683 1303      00106         BANKSEL ADCON1
00CA   3007           00107         MOVLW 0x07
00CB   009F           00108         MOVWF ADCON1
                      00109 
00CC   1283 1303      00110         BANKSEL PORTA
                      00111 
                      00112         ;D5 = 0, D4 = 0, OF LCD SO PORTA0 = 1, PORTA1 = 1
00CE   3003           00113         MOVLW   0x03            ; Load initial nibble
00CF   0085           00114         MOVWF   PORTA           ; and output it to display
00D0   209E           00115         CALL    pulseE          ; Latch initial code
00D1   3005           00116         MOVLW   D'5'            ; Set delay 5ms
00D2   2099           00117         CALL    xms             ; and wait
00D3   209E           00118         CALL    pulseE          ; Latch initial code again
00D4   2093           00119         CALL    onems           ; Wait 1ms
00D5   209E           00120         CALL    pulseE          ; Latch initial code again
00D6   1005           00121         BCF     PORTA,0         ; Set 4-bit mode
00D7   209E           00122         CALL    pulseE          ; Latch it
                      00123         
00D8   3028           00124         MOVLW   0x28            ; Set 4-bit mode, 2 lines
00D9   20AB           00125         CALL    send            ; and send code
00DA   3008           00126         MOVLW   0x08            ; Switch off display
00DB   20AB           00127         CALL    send            ; and send code
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DC   3001           00128         MOVLW   0x01            ; Code to clear display
00DD   20AB           00129         CALL    send            ; and send code
00DE   3006           00130         MOVLW   0x06            ; Enable cursor auto inc  
00DF   20AB           00131         CALL    send            ; and send code
00E0   3080           00132         MOVLW   0x80            ; Zero display address
00E1   20AB           00133         CALL    send            ; and send code
00E2   300C           00134         MOVLW   0x0C            ; Turn on display  
00E3   20AB           00135         CALL    send            ; and send code
                      00136 
00E4   0008           00137         RETURN                  ; Done
                      00138 
                      00139 ;--------------------------------------------------------------
                      00140 ; Display Cursor Blinking
                      00141 ;--------------------------------------------------------------
00E5                  00142 BLINK_CURSOR:   
00E5   1274           00143         BCF     Select, RS
00E6   300F           00144         MOVLW   0x0F            ; Display Blinking Cursor  
00E7   20AB           00145         CALL    send            ; and send code
00E8   0008           00146         RETURN
                      00147 ; -------------------------------------------------------------
                      00148 ;--------------------------------------------------------------
                      00336 
                      00337 ;=================================================================================
                      00338 ; Program Main Function
                      00339 ;=================================================================================
00E9                  00340 start:
                      00341 
                      00342         ;; 10 ms deley, to start the LCD
00E9   300A           00343         MOVLW   D'10'
00EA   2099           00344         CALL    xms
                      00345 
                      00346         ;; init the LCD
00EB   20BE           00347         CALL    inid
                      00348 
                      00349         ;; Print
00EC   210D           00350         CALL    PRINT_ENTER_OPERATION
                      00351 
                      00352 
                      00353         ;; Set the cursor on the first row of the second line
00ED   30C0           00354         MOVLW   0xC0
00EE   1274           00355         BCF     Select, RS
00EF   20AB           00356         CALL    send
                      00357 
                      00358         ;; display 0 for the first digit
00F0   3030           00359         MOVLW '0'
00F1   1674           00360         BSF     Select, RS
00F2   20AB           00361         CALL    send
                      00362 
                      00363         ; return the cursor to the same position
00F3   30C0           00364         MOVLW   0xC0
00F4   1274           00365         BCF     Select, RS
00F5   20AB           00366         CALL    send
                      00367 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00368 
                      00369         ; Clear Timer 0 (Start Time counting now)
00F6   1283 1303      00370         BANKSEL PORTA                           ; Bank 0
00F8   0181           00371         CLRF    TMR0
00F9   301E           00372         MOVLW   NUM_OF_OVERFLOWS
00FA   00A0           00373         MOVWF   TCNT
                      00374 
                      00375         ; make the cursor blink
00FB   20E5           00376         CALL    BLINK_CURSOR
                      00377 
                      00378         ;; end of the main finction (will be stuck here and will just handle interrupts)
00FC                  00379 loop:
00FC   28FC           00380         GOTO    loop
                      00381 ;=================================================================================
                      00382 ; END OF Program Main Function
                      00383 ;=================================================================================
                      00384 
                      00385 
                      00386 ;=================================================================================
                      00387 ; TURN TIMER LED ON
                      00388 ;=================================================================================
00FD                  00389 LED_TURN_ON_T:
                      00390 
00FD   1283 1303      00391         BANKSEL PORTD
00FF   1508           00392         BSF     PORTD, RD2
                      00393 
0100   287F           00394         GOTO    BACK_T
                      00395 ;=================================================================================
                      00396 ; END OF TURN TIMER LED ON
                      00397 ;=================================================================================
                      00398 
                      00399 
                      00400 ;=================================================================================
                      00401 ; TURN TIMER LED OFF
                      00402 ;=================================================================================
0101                  00403 LED_TURN_OFF_T:
                      00404 
0101   1283 1303      00405         BANKSEL PORTD
0103   1108           00406         BCF     PORTD, RD2
                      00407 
0104   287F           00408         GOTO    BACK_T
                      00409 ;=================================================================================
                      00410 ; END OF TURN TIMER LED OFF
                      00411 ;=================================================================================
                      00412 
                      00413 
                      00414 ;=================================================================================
                      00415 ; TURN BUTTON LED ON
                      00416 ;=================================================================================
0105                  00417 LED_TURN_ON_B:
                      00418 
0105   1283 1303      00419         BANKSEL PORTD
0107   1588           00420         BSF     PORTD, RD3
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00421 
0108   284D           00422         GOTO    BACK_B
                      00423 ;=================================================================================
                      00424 ; END OF TURN BUTTON LED ON
                      00425 ;=================================================================================
                      00426 
                      00427 
                      00428 ;=================================================================================
                      00429 ; TURN BUTTON LED OFF
                      00430 ;=================================================================================
0109                  00431 LED_TURN_OFF_B:
                      00432 
0109   1283 1303      00433         BANKSEL PORTD
010B   1188           00434         BCF     PORTD, RD3
                      00435 
010C   284D           00436         GOTO    BACK_B
                      00437 ;=================================================================================
                      00438 ; END OF TURN BUTTON LED OFF
                      00439 ;=================================================================================
                      00440 
                      00441 
                      00442 
                      00443 ;=================================================================================
                      00444 ; Display "ENTER OPERATION" on LCD Function
                      00445 ;=================================================================================
010D                  00446 PRINT_ENTER_OPERATION:
                      00447 
010D   1283 1303      00448         BANKSEL INTCON
010F   138B           00449         BCF     INTCON, GIE                     ; Disable global interrupts
                      00450 
0110   1283 1303      00451         BANKSEL PORTA
                      00452 
                      00453         ; move cursor to the the first column of first row
0112   1274           00454         BCF     Select, RS
0113   3080           00455         MOVLW   0x80
0114   20AB           00456         CALL    send
                      00457 
                      00458 
0115   3045           00459         MOVLW   'E'
0116   1674           00460         BSF     Select, RS
0117   20AB           00461         CALL    send
                      00462 
0118   304E           00463         MOVLW   'N'
0119   1674           00464         BSF     Select, RS
011A   20AB           00465         CALL    send
                      00466 
011B   3054           00467         MOVLW   'T'
011C   1674           00468         BSF     Select, RS
011D   20AB           00469         CALL    send
                      00470 
011E   3045           00471         MOVLW   'E'
011F   1674           00472         BSF     Select, RS
0120   20AB           00473         CALL    send
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00474 
0121   3052           00475         MOVLW   'R'
0122   1674           00476         BSF     Select, RS
0123   20AB           00477         CALL    send
                      00478 
0124   3020           00479         MOVLW   ' '
0125   1674           00480         BSF     Select, RS
0126   20AB           00481         CALL    send
                      00482 
0127   304F           00483         MOVLW   'O'
0128   1674           00484         BSF     Select, RS
0129   20AB           00485         CALL    send
                      00486 
012A   3050           00487         MOVLW   'P'
012B   1674           00488         BSF     Select, RS
012C   20AB           00489         CALL    send
                      00490 
012D   3045           00491         MOVLW   'E'
012E   1674           00492         BSF     Select, RS
012F   20AB           00493         CALL    send
                      00494 
0130   3052           00495         MOVLW   'R'
0131   1674           00496         BSF     Select, RS
0132   20AB           00497         CALL    send
                      00498 
0133   3041           00499         MOVLW   'A'
0134   1674           00500         BSF     Select, RS
0135   20AB           00501         CALL    send
                      00502 
0136   3054           00503         MOVLW   'T'
0137   1674           00504         BSF     Select, RS
0138   20AB           00505         CALL    send
                      00506 
0139   3049           00507         MOVLW   'I'
013A   1674           00508         BSF     Select, RS
013B   20AB           00509         CALL    send
                      00510 
013C   304F           00511         MOVLW   'O'
013D   1674           00512         BSF     Select, RS
013E   20AB           00513         CALL    send
                      00514 
013F   304E           00515         MOVLW   'N'
0140   1674           00516         BSF     Select, RS
0141   20AB           00517         CALL    send
                      00518 
0142   1283 1303      00519         BANKSEL INTCON
0144   178B           00520         BSF     INTCON, GIE                     ; Enable global interrupts
                      00521 
0145   1283 1303      00522         BANKSEL PORTA
0147   0008           00523         RETURN
                      00524 ;=================================================================================
                      00525 ; END OF Display "ENTER OPERATION" on LCD Function
                      00526 ;=================================================================================
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00527 
                      00528 
                      00529 ;=================================================================================
                      00530 ; Initialize the MAX_ARR array values Function
                      00531 ;=================================================================================
0148                  00532 INIT_MAX_ARR:
                      00533 
0148   1283 1303      00534         BANKSEL PORTA
014A   3026           00535         MOVLW   MAX_ARR_IND
014B   00AB           00536         MOVWF   CURR_ARR_IND
014C   0084           00537         MOVWF   FSR
014D   3007           00538         MOVLW   7
014E   0080           00539         MOVWF   INDF
014F   0A84           00540         INCF    FSR,F
                      00541 
0150   3006           00542         MOVLW   6
0151   0080           00543         MOVWF   INDF
0152   0A84           00544         INCF    FSR,F
                      00545 
0153   3006           00546         MOVLW   6
0154   0080           00547         MOVWF   INDF
0155   0A84           00548         INCF    FSR,F
                      00549 
0156   3004           00550         MOVLW   4
0157   0080           00551         MOVWF   INDF
0158   0A84           00552         INCF    FSR,F
                      00553 
0159   3006           00554         MOVLW   6
015A   0080           00555         MOVWF   INDF
                      00556 
015B   0008           00557         RETURN
                      00558 ;=================================================================================
                      00559 ; END OF Initialize the MAX_ARR array values Function
                      00560 ;=================================================================================
                      00561 
                      00562 
                      00563 ;=================================================================================
                      00564 ; Increment Digit Function
                      00565 ;=================================================================================
015C                  00566 INC_DIGIT:
015C   1283 1303      00567         BANKSEL PORTA                           ; Bank 0
                      00568         ;; Reset Timer
015E   301E           00569         MOVLW   NUM_OF_OVERFLOWS
015F   00A0           00570         MOVWF   TCNT
0160   0181           00571         CLRF    TMR0
                      00572 
                      00573         ;; incerement the digit
0161   0AA3           00574         INCF    DIG_VAL
                      00575 
                      00576         ;; ckeck if reached the digit limit (65535)
0162   1824           00577         BTFSC   HAS_MAX, 0
0163   216B           00578         CALL    CHECK_MAX
                      00579 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00580         ;; ckeck if exceeded 9
0164   300A           00581         MOVLW   D'10'
0165   0623           00582         XORWF   DIG_VAL,W
0166   1903           00583         BTFSC   STATUS, Z               ;skip next if it is not 10
0167   01A3           00584         CLRF    DIG_VAL
                      00585 
                      00586         ;; display the digit
0168   0823           00587         MOVFW   DIG_VAL
0169   217B           00588         CALL    DISPLAY_DIGIT
016A   0008           00589         RETURN
                      00590 ;=================================================================================
                      00591 ; END OF Increment Digit Function
                      00592 ;=================================================================================
                      00593 
                      00594 
                      00595 ;=================================================================================
                      00596 ; Check if the digit reached its max limit Function
                      00597 ;=================================================================================
016B                  00598 CHECK_MAX:
016B   01A5           00599         CLRF    IS_MAX
                      00600 
016C   082B           00601         MOVFW   CURR_ARR_IND
016D   0084           00602         MOVWF   FSR
016E   0800           00603         MOVFW   INDF
                      00604 
016F   3EFF           00605         ADDLW   0xFF                    ;DECREMENT the MAX limit
0170   0623           00606         XORWF   DIG_VAL,W
0171   1903           00607         BTFSC   STATUS, Z               ;skip next if it is not max
0172   09A5           00608         COMF    IS_MAX, F
                      00609 
                      00610 
0173   082B           00611         MOVFW    CURR_ARR_IND
0174   0084           00612         MOVWF   FSR
0175   0800           00613         MOVFW   INDF
                      00614 
0176   0623           00615         XORWF   DIG_VAL,W
                      00616 
0177   1D03           00617         BTFSS   STATUS, Z               ;skip next if > max
0178   0008           00618         RETURN
                      00619 
0179   01A3           00620         CLRF    DIG_VAL
                      00621 
017A   0008           00622         RETURN
                      00623 ;=================================================================================
                      00624 ; END OF Check if the digit reached its max limit Function
                      00625 ;=================================================================================
                      00626 
                      00627 
                      00628 ;=================================================================================
                      00629 ; Display Digit Function
                      00630 ;=================================================================================
017B                  00631 DISPLAY_DIGIT:
017B   00B3           00632         MOVWF   TEMP
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00633 
017C   0822           00634         MOVFW   CURSOR_POS
017D   1274           00635         BCF     Select, RS
017E   20AB           00636         CALL    send
                      00637 
017F   0833           00638         MOVFW   TEMP
0180   3E30           00639         ADDLW   '0'
0181   1674           00640         BSF     Select, RS
0182   20AB           00641         CALL    send
                      00642 
0183   0822           00643         MOVFW   CURSOR_POS
0184   1274           00644         BCF     Select, RS
0185   20AB           00645         CALL    send
                      00646 
0186   0008           00647         RETURN
                      00648 ;=================================================================================
                      00649 ; END OF Display Digit Function
                      00650 ;=================================================================================
                      00651 
                      00652 
                      00653 ;=================================================================================
                      00654 ; Display Digit with Cursor Increment Function
                      00655 ;=================================================================================
0187                  00656 DISPLAY_DIGIT_WITH_INC:
0187   3E30           00657         ADDLW   '0'
0188   1674           00658         BSF     Select, RS
0189   20AB           00659         CALL    send
                      00660 
018A   0008           00661         RETURN
                      00662 ;=================================================================================
                      00663 ; END OF Display Digit with Cursor Increment Function
                      00664 ;=================================================================================
                      00665 
                      00666 
                      00667 
                      00668 ;=================================================================================
                      00669 ; Change OP Function
                      00670 ;=================================================================================
018B                  00671 INC_OP:
018B   1283 1303      00672         BANKSEL PORTA                   ; Bank 0
                      00673         ;; Reset Timer 0
018D   301E           00674         MOVLW   NUM_OF_OVERFLOWS
018E   00A0           00675         MOVWF   TCNT
018F   0181           00676         CLRF    TMR0
                      00677 
                      00678 
0190   0AB8           00679         INCF    OP_ARR_IND
0191   0AB9           00680         INCF    OP
                      00681 
0192   0838           00682         MOVFW   OP_ARR_IND
0193   0084           00683         MOVWF   FSR
0194   0839           00684         MOVFW   OP
0195   00B1           00685         MOVWF   IS_EQ
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0196   3003           00686         MOVLW   D'3'
0197   06B1           00687         XORWF   IS_EQ, F
                      00688 
0198   1903           00689         BTFSC   STATUS, Z
0199   299B           00690         GOTO    RESET_INDEX
                      00691 
019A   299F           00692         GOTO    GET_OP
                      00693 
019B                  00694 RESET_INDEX:
019B   01B9           00695         CLRF    OP
019C   3035           00696         MOVLW   OP_ARR
019D   00B8           00697         MOVWF   OP_ARR_IND
019E   0084           00698         MOVWF   FSR
                      00699 
019F                  00700 GET_OP:
019F   0800           00701         MOVFW   INDF
                      00702 
01A0   21A2           00703         CALL    DISPLAY_OP
01A1   0008           00704         RETURN
                      00705 ;=================================================================================
                      00706 ; END OF Change OP Function
                      00707 ;=================================================================================
                      00708 
                      00709 
                      00710 ;=================================================================================
                      00711 ; Display OP Function (send op ASCII in W)
                      00712 ;=================================================================================
01A2                  00713 DISPLAY_OP
01A2   1283 1303      00714         BANKSEL PORTA
01A4   00B3           00715         MOVWF TEMP
                      00716 
01A5   0822           00717         MOVFW   CURSOR_POS
01A6   1274           00718         BCF     Select, RS
01A7   20AB           00719         CALL    send
                      00720 
01A8   0833           00721         MOVFW   TEMP
01A9   1674           00722         BSF     Select, RS
01AA   20AB           00723         CALL    send
                      00724 
01AB   0822           00725         MOVFW   CURSOR_POS
01AC   1274           00726         BCF     Select, RS
01AD   20AB           00727         CALL    send
                      00728 
01AE   0008           00729         RETURN
                      00730 ;=================================================================================
                      00731 ; END OF Display OP Function
                      00732 ;=================================================================================
                      00733 
                      00734 
                      00735 ;=================================================================================
                      00736 ; Initialize OP_ARR array values Function
                      00737 ;=================================================================================
01AF                  00738 INIT_OP_ARR:
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00739 
01AF   1283 1303      00740         BANKSEL PORTA
01B1   3035           00741         MOVLW   OP_ARR
01B2   00B8           00742         MOVWF   OP_ARR_IND
01B3   0084           00743         MOVWF   FSR
01B4   302B           00744         MOVLW   '+'
01B5   0080           00745         MOVWF   INDF
01B6   0A84           00746         INCF    FSR,F
                      00747 
01B7   302F           00748         MOVLW   '/'
01B8   0080           00749         MOVWF   INDF
01B9   0A84           00750         INCF    FSR,F
                      00751 
01BA   3025           00752         MOVLW   '%'
01BB   0080           00753         MOVWF   INDF
                      00754 
01BC   0008           00755         RETURN
                      00756 
                      00757 ;=================================================================================
                      00758 ; Initialize OP_ARR array values Function
                      00759 ;=================================================================================
                      00760 
                      00761 
                      00762 ;=================================================================================
                      00763 ; Display Result Function
                      00764 ;=================================================================================
01BD                  00765 DISPLAY_RESULT:
01BD   1283 1303      00766         BANKSEL INTCON
01BF   138B           00767         BCF     INTCON, GIE                     ; Disable global interrupts
                      00768 
01C0   1283 1303      00769         BANKSEL PORTA
                      00770 
01C2   3003           00771         MOVLW   D'3'
01C3   00B4           00772         MOVWF   CURR_DISPLAY
                      00773 
01C4   3004           00774         MOVLW   D'4'                            ;
01C5   00B0           00775         MOVWF   DIG_CNT                         ; DIG_CNT = 4, so that the next interrupt the stage is i
                            ncremented
                      00776 
01C6   01BA           00777         CLRF    CLICK_CNT
                      00778 
                      00779 
                      00780         ;; Clear display screen
01C7   1274           00781         BCF     Select, RS
01C8   3001           00782         MOVLW   0x01
01C9   20AB           00783         CALL    send
                      00784 
                      00785         ;; Turn Off Cursor Display
01CA   300C           00786         MOVLW   0x0C
01CB   20AB           00787         CALL    send
                      00788 
                      00789         ;; Move cursor to the first column of the first row
01CC   3080           00790         MOVLW   0x80
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01CD   20AB           00791         CALL    send
                      00792 
                      00793         ;; PRINT "RESULT" on the first row
01CE   1674           00794         BSF     Select, RS
01CF   3052           00795         MOVLW   'R'
01D0   20AB           00796         CALL    send
                      00797 
01D1   3045           00798         MOVLW   'E'
01D2   20AB           00799         CALL    send
                      00800 
01D3   3053           00801         MOVLW   'S'
01D4   20AB           00802         CALL    send
                      00803 
01D5   3055           00804         MOVLW   'U'
01D6   20AB           00805         CALL    send
                      00806 
01D7   304C           00807         MOVLW   'L'
01D8   20AB           00808         CALL    send
                      00809 
01D9   3054           00810         MOVLW   'T'
01DA   20AB           00811         CALL    send
                      00812 
                      00813 
                      00814         ;; Move cursor to the first column of the second row
01DB   1274           00815         BCF     Select, RS
01DC   30C0           00816         MOVLW   0xC0
01DD   00A2           00817         MOVWF   CURSOR_POS
01DE   20AB           00818         CALL    send
                      00819 
01DF   1674           00820         BSF     Select, RS
01E0   303D           00821         MOVLW   '='
01E1   20AB           00822         CALL    send
                      00823 
                      00824 
01E2   238C           00825         CALL    CALCULATE_RESULT
                      00826 ;; TODO: REMOVE BOTH THE CALL AND THE FUNCTUIN
                      00827         ;CALL   DISPLAY_RES_NUM
                      00828 
01E3   01B9           00829         CLRF    OP
01E4   3035           00830         MOVLW   OP_ARR
01E5   00B8           00831         MOVWF   OP_ARR_IND
01E6   3004           00832         MOVLW   D'4'                            ;
01E7   00B0           00833         MOVWF   DIG_CNT                         ; DIG_CNT = 4, so that the next interrupt the stage is i
                            ncremented
                      00834 
01E8   1283 1303      00835         BANKSEL INTCON
01EA   178B           00836         BSF     INTCON, GIE                     ; Enable global interrupts
                      00837 
01EB   1283 1303      00838         BANKSEL PORTA
                      00839 
01ED   287F           00840         GOTO    BACK_T
                      00841 ;=================================================================================
                      00842 ; END OF Display Result Function
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00843 ;=================================================================================
                      00844 
                      00845 
                      00846 ;=================================================================================
                      00847 ; Display Result Number Function
                      00848 ;=================================================================================
01EE                  00849 DISPLAY_RES_NUM:
01EE   1283 1303      00850         BANKSEL PORTA
                      00851 
01F0   082C           00852         MOVFW   NUM1_HIGH
01F1   00BB           00853         MOVWF   NUMERATOR_HIGH
                      00854 
01F2   082D           00855         MOVFW   NUM1_LOW
01F3   00BC           00856         MOVWF   NUMERATOR_LOW
                      00857 
01F4   2310           00858         CALL    DISPLAY_NUMBER
                      00859 
01F5   082E           00860         MOVFW   NUM2_HIGH
01F6   00BB           00861         MOVWF   NUMERATOR_HIGH
                      00862 
01F7   082F           00863         MOVFW   NUM2_LOW
01F8   00BC           00864         MOVWF   NUMERATOR_LOW
                      00865 
01F9   2310           00866         CALL    DISPLAY_NUMBER
                      00867 
01FA   0008           00868         RETURN
                      00869 ;=================================================================================
                      00870 ; END OF Display Result Number Function
                      00871 ;=================================================================================
                      00872 
                      00873 
                      00874 ;=================================================================================
                      00875 ; Disable Timer
                      00876 ;=================================================================================
01FB                  00877 TIMER_KEEP_STAGE:
01FB   1283 1303      00878         BANKSEL PORTA
                      00879 
01FD   3004           00880         MOVLW   D'4'                            ;
01FE   00B0           00881         MOVWF   DIG_CNT                         ; DIG_CNT = 4, so that the next interrupt the stage is i
                            ncremented
                      00882 
                      00883 
                      00884         ;; if 0
01FF   3000           00885         MOVLW   D'0'
0200   063A           00886         XORWF   CLICK_CNT, W
0201   1903           00887         BTFSC   STATUS, Z
0202   2A09           00888         GOTO    DEACTIVATE_TIMER
                      00889 
0203   3001           00890         MOVLW   D'1'
0204   063A           00891         XORWF   CLICK_CNT, W
0205   1D03           00892         BTFSS   STATUS, Z
0206   287F           00893         GOTO    BACK_T
                      00894 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00895         ;; if 1
0207   0AB4           00896         INCF CURR_DISPLAY
0208   2859           00897         GOTO TIMER_HANDLING
                      00898 
                      00899 
                      00900 
                      00901 
0209                  00902 DEACTIVATE_TIMER:
0209   1283 1303      00903         BANKSEL INTCON
020B   128B           00904         BCF     INTCON, TMR0IE          ; Disable timer0 interrupt
                      00905 
020C   1283 1303      00906         BANKSEL PORTA                           ; Bank 0
                      00907         ;; Move cursor to the first column of the first row
020E   1274           00908         BCF     Select, RS
020F   3080           00909         MOVLW   0x80
0210   20AB           00910         CALL    send
                      00911 
0211   1283 1303      00912         BANKSEL INTCON
0213   138B           00913         BCF     INTCON, GIE                     ; Disable global interrupts
                      00914 
0214   1283 1303      00915         BANKSEL PORTA                           ; Bank 0
                      00916         ;; PRINT message on the first row
0216   1674           00917         BSF     Select, RS
0217   304B           00918         MOVLW   'K'
0218   20AB           00919         CALL    send
                      00920 
0219   3045           00921         MOVLW   'E'
021A   20AB           00922         CALL    send
                      00923 
021B   3045           00924         MOVLW   'E'
021C   20AB           00925         CALL    send
                      00926 
021D   3050           00927         MOVLW   'P'
021E   20AB           00928         CALL    send
                      00929 
021F   303F           00930         MOVLW   '?'
0220   20AB           00931         CALL    send
                      00932 
0221   3020           00933         MOVLW   ' '
0222   20AB           00934         CALL    send
                      00935 
0223   305B           00936         MOVLW   '['
0224   20AB           00937         CALL    send
                      00938 
0225   3031           00939         MOVLW   '1'
0226   20AB           00940         CALL    send
                      00941 
0227   303A           00942         MOVLW   ':'
0228   20AB           00943         CALL    send
                      00944 
0229   3059           00945         MOVLW   'Y'
022A   20AB           00946         CALL    send
                      00947 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

022B   302C           00948         MOVLW   ','
022C   20AB           00949         CALL    send
                      00950 
022D   3020           00951         MOVLW   ' '
022E   20AB           00952         CALL    send
                      00953 
022F   3032           00954         MOVLW   '2'
0230   20AB           00955         CALL    send
                      00956 
0231   303A           00957         MOVLW   ':'
0232   20AB           00958         CALL    send
                      00959 
0233   304E           00960         MOVLW   'N'
0234   20AB           00961         CALL    send
                      00962 
0235   305D           00963         MOVLW   ']'
0236   20AB           00964         CALL    send
                      00965 
                      00966 
                      00967         ;; RESET Timer variables for the next time to be used
0237   302E           00968         MOVLW   D'46'
0238   00A0           00969         MOVWF   TCNT                            ; Reset TCNT Counter to 46 (3 sec)
0239   1283 1303      00970         BANKSEL TMR0                            ; Bank 0
023B   0181           00971         CLRF    TMR0                            ; clear timer
                      00972 
023C   1283 1303      00973         BANKSEL INTCON
023E   178B           00974         BSF     INTCON, GIE                     ; Enable global interrupts
                      00975 
023F   1283 1303      00976         BANKSEL PORTA
                      00977 
0241   2890           00978         GOTO    INT_END;
                      00979 ;=================================================================================
                      00980 ; END OF Disable Timer
                      00981 ;=================================================================================
                      00982 
                      00983 
                      00984 ;=================================================================================
                      00985 ; Check the number of clikcs in KEEP stage
                      00986 ;=================================================================================
0242                  00987 CHECK_CLICKS:
0242   1283 1303      00988         BANKSEL PORTA
0244   3000           00989         MOVLW   D'0'
0245   063A           00990         XORWF   CLICK_CNT, W
0246   1903           00991         BTFSC   STATUS, Z
0247   2A49           00992         GOTO    REACTIVATE_TIMER
                      00993 
0248   2805           00994         GOTO    init
                      00995 
0249                  00996 REACTIVATE_TIMER:
                      00997         ;; RESET Timer variables for the next time to be used
0249   302E           00998         MOVLW   D'46'
024A   00A0           00999         MOVWF   TCNT                            ; Reset TCNT Counter to 46 (3 sec)
024B   1283 1303      01000         BANKSEL TMR0                            ; Bank 0
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

024D   0181           01001         CLRF    TMR0                            ; clear timer
                      01002 
024E   110B           01003         BCF     INTCON, TMR0IF          ; clear ov bit
024F   168B           01004         BSF     INTCON, TMR0IE          ; Enable timer0 interrupt
                      01005 
0250   2A51           01006         GOTO CHECK_CLICKS_END
                      01007 
                      01008 
0251                  01009 CHECK_CLICKS_END:
                      01010 
0251   0ABA           01011         INCF    CLICK_CNT
0252   284D           01012         GOTO    BACK_B
                      01013 ;=================================================================================
                      01014 ; END OF Check the number of clikcs in KEEP stage
                      01015 ;=================================================================================
                      01016 
                      01017 
                      01018 ;=================================================================================
                      01019 ; OP_AFTER_KEEP
                      01020 ;=================================================================================
0253                  01021 OP_AFTER_KEEP:
0253   1283 1303      01022         BANKSEL PORTA                           ; Bank 0
                      01023 
0255   3004           01024         MOVLW   D'4'                            ;
0256   00B0           01025         MOVWF   DIG_CNT                         ; DIG_CNT = 4, so that the next interrupt the stage is i
                            ncremented
                      01026 
                      01027 
                      01028 
                      01029         ;; Clear display screen
0257   1274           01030         BCF     Select, RS
0258   3001           01031         MOVLW   0x01
0259   20AB           01032         CALL    send
                      01033 
025A   210D           01034         CALL    PRINT_ENTER_OPERATION
                      01035 
                      01036 ;; Move cursor to the first column of the second row (op position)
025B   1274           01037         BCF     Select, RS
025C   30C0           01038         MOVLW   0xC0
025D   00A2           01039         MOVWF   CURSOR_POS
025E   20AB           01040         CALL    send
                      01041 ;;---------------------
                      01042 ;; DISPLAY FIRST NUM
                      01043 ;;---------------------
025F   082C           01044         MOVFW   NUM1_HIGH
0260   00BB           01045         MOVWF   NUMERATOR_HIGH
                      01046 
0261   082D           01047         MOVFW   NUM1_LOW
0262   00BC           01048         MOVWF   NUMERATOR_LOW
                      01049 
0263   2310           01050         CALL    DISPLAY_NUMBER
                      01051 
                      01052         ;; Move cursor to the seventh column of the second row (op position)
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0264   1274           01053         BCF     Select, RS
0265   30C6           01054         MOVLW   0xC6
0266   00A2           01055         MOVWF   CURSOR_POS
0267   20AB           01056         CALL    send
                      01057 
                      01058 ;;---------------------
                      01059 ;; DISPLAY SECOND NUM
                      01060 ;;---------------------
                      01061 
                      01062 
0268   082E           01063         MOVFW   NUM2_HIGH
0269   00BB           01064         MOVWF   NUMERATOR_HIGH
                      01065 
026A   082F           01066         MOVFW   NUM2_LOW
026B   00BC           01067         MOVWF   NUMERATOR_LOW
                      01068 
026C   2310           01069         CALL    DISPLAY_NUMBER
                      01070 
                      01071 
                      01072 
                      01073 
                      01074         ;; Move cursor to the sixth column of the second row (op position)
026D   1274           01075         BCF     Select, RS
026E   30C5           01076         MOVLW   0xC5
026F   00A2           01077         MOVWF   CURSOR_POS
0270   20AB           01078         CALL    send
                      01079 
0271   01B9           01080         CLRF    OP
                      01081 
0272   1674           01082         BSF     Select, RS
0273   302B           01083         MOVLW   '+'
0274   21A2           01084         CALL    DISPLAY_OP
                      01085 
0275   20E5           01086         CALL    BLINK_CURSOR
                      01087 
0276   3005           01088         MOVLW   D'5'
0277   00B4           01089         MOVWF   CURR_DISPLAY
                      01090 
0278   287F           01091         GOTO    BACK_T
                      01092 
                      01093 ;=================================================================================
                      01094 ; END OF OP_AFTER_KEEP
                      01095 ;=================================================================================
                      01096 
                      01097 
                      01098 ;=================================================================================
                      01099 ; NEXT_DIGIT
                      01100 ;=================================================================================
0279                  01101 NEXT_DIGIT:
                      01102 ;       CALL    PROCESS_CURRENT_DIGIT
0279   0AAB           01103         INCF    CURR_ARR_IND            ; Increment the index of max limit array
027A   0AD0           01104         INCF    CURR_TENS_ARR_IND
027B   0AD0           01105         INCF    CURR_TENS_ARR_IND
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

027C   01A3           01106         CLRF    DIG_VAL                         ; clear the digit value
027D   0103           01107         CLRW                                            ; clear the Accumulator
027E   217B           01108         CALL    DISPLAY_DIGIT           ; Display the digit '0'
                      01109 
027F   01A4           01110         CLRF    HAS_MAX                         ; clear HAS_MAX idicator for the next digit
                      01111         ;; Check if the number so far is at its max limit (65535)
0280   1C25           01112         BTFSS   IS_MAX, 0
0281   287F           01113         GOTO    BACK_T
                      01114         ; if it is:
0282   01A5           01115         CLRF    IS_MAX                          ; IS_MAX = 0
0283   01A4           01116         CLRF    HAS_MAX
0284   09A4           01117         COMF    HAS_MAX, F                      ; HAS_MAX = 0xFF
0285   287F           01118         GOTO    BACK_T                          ; switch the led
                      01119 ;=================================================================================
                      01120 ; END OF NEXT_DIGIT
                      01121 ;=================================================================================
                      01122 
                      01123 ;=================================================================================
                      01124 ; FIRST_DIGIT
                      01125 ;=================================================================================
0286                  01126 FIRST_DIGIT:
0286   01A5           01127         CLRF    IS_MAX                          ; IS_MAX = 0
0287   01A4           01128         CLRF    HAS_MAX
0288   09A4           01129         COMF    HAS_MAX, F
                      01130 
0289   3026           01131         MOVLW   MAX_ARR_IND
028A   00AB           01132         MOVWF   CURR_ARR_IND
028B   01A3           01133         CLRF    DIG_VAL                         ; clear the digit value
028C   0103           01134         CLRW                                            ; clear the Accumulator
028D   217B           01135         CALL    DISPLAY_DIGIT           ; Display the digit '0'
028E   287F           01136         GOTO    BACK_T                          ; switch the led
                      01137 ;=================================================================================
                      01138 ; FIRST_DIGIT
                      01139 ;=================================================================================
                      01140 
                      01141 
                      01142 ;=================================================================================
                      01143 ; PROCESS_CURRENT_DIGIT
                      01144 ;=================================================================================
028F                  01145 PROCESS_CURRENT_DIGIT:
028F   1283 1303      01146         BANKSEL PORTA
0291   3000           01147         MOVLW   0x00
0292   0623           01148         XORWF   DIG_VAL, W
0293   1903           01149         BTFSC   STATUS, Z
0294   0008           01150         RETURN
                      01151 
0295   3000           01152         MOVLW   0x0                             ; NUM1
0296   0634           01153         XORWF   CURR_DISPLAY, W
0297   1903           01154         BTFSC   STATUS, Z
0298   2A9E           01155         GOTO    TENS_LOOP_START1
                      01156 
0299   3002           01157         MOVLW   D'2'                            ; NUM2
029A   0634           01158         XORWF   CURR_DISPLAY, W
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

029B   1903           01159         BTFSC   STATUS, Z
029C   2AAD           01160         GOTO    TENS_LOOP_START2
                      01161 
029D   0008           01162         RETURN
                      01163 
029E                  01164 TENS_LOOP_START1:
                      01165 
                      01166         ; PERFORM ADDITION FOR LOW
029E   0850           01167         MOVFW   CURR_TENS_ARR_IND
029F   0084           01168         MOVWF   FSR
02A0   0800           01169         MOVFW   INDF    ; ACCUMULATOR NOW HAS THE BINARY FROM TENS
02A1   07AD           01170         ADDWF   NUM1_LOW, F
                      01171 
                      01172         ; ADD CARRY IF EXISTS
02A2   1803           01173         BTFSC   STATUS, C
02A3   0AAC           01174         INCF    NUM1_HIGH, 1
                      01175 
                      01176         ; PERFORM ADDITION FOR HIGH
02A4   0AD0           01177         INCF    CURR_TENS_ARR_IND
02A5   0850           01178         MOVFW   CURR_TENS_ARR_IND
02A6   0084           01179         MOVWF   FSR
02A7   0800           01180         MOVFW   INDF    ; ACCUMULATOR NOW HAS THE BINARY FROM TENS
02A8   07AC           01181         ADDWF   NUM1_HIGH, 1
                      01182 
02A9   03D0           01183         DECF    CURR_TENS_ARR_IND,F
02AA   0BA3           01184         DECFSZ  DIG_VAL, 1
02AB   2A9E           01185         GOTO    TENS_LOOP_START1
02AC   0008           01186         RETURN
                      01187 
02AD                  01188 TENS_LOOP_START2:
                      01189 
                      01190         ; PERFORM ADDITION FOR LOW
02AD   0850           01191         MOVFW   CURR_TENS_ARR_IND
02AE   0084           01192         MOVWF   FSR
02AF   0800           01193         MOVFW   INDF    ; ACCUMULATOR NOW HAS THE BINARY FROM TENS
02B0   07AF           01194         ADDWF   NUM2_LOW, F
                      01195 
                      01196         ; ADD CARRY IF EXISTS
02B1   1803           01197         BTFSC   STATUS, C
02B2   0AAE           01198         INCF    NUM2_HIGH, 1
                      01199 
                      01200         ; PERFORM ADDITION FOR HIGH
02B3   0AD0           01201         INCF    CURR_TENS_ARR_IND
02B4   0850           01202         MOVFW   CURR_TENS_ARR_IND
02B5   0084           01203         MOVWF   FSR
02B6   0800           01204         MOVFW   INDF    ; ACCUMULATOR NOW HAS THE BINARY FROM TENS
02B7   07AE           01205         ADDWF   NUM2_HIGH, 1
                      01206 
02B8   03D0           01207         DECF    CURR_TENS_ARR_IND,F
02B9   0BA3           01208         DECFSZ  DIG_VAL, 1
02BA   2AAD           01209         GOTO    TENS_LOOP_START2
02BB   0008           01210         RETURN
                      01211 ;=================================================================================
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01212 ; END OF PROCESS_CURRENT_DIGIT
                      01213 ;=================================================================================
                      01214 
                      01215 
                      01216 ;=================================================================================
                      01217 ; Initialize the TENS_ARR with the binary representation value
                      01218 ;=================================================================================
02BC                  01219 INIT_TENS_ARR:
                      01220 
02BC   1283 1303      01221         BANKSEL PORTA
02BE   3045           01222         MOVLW   TENS_ARR
02BF   00D0           01223         MOVWF   CURR_TENS_ARR_IND
02C0   0084           01224         MOVWF   FSR
                      01225 
02C1   3010           01226         MOVLW   B'00010000'
02C2   0080           01227         MOVWF   INDF
02C3   0A84           01228         INCF    FSR,F
                      01229 
02C4   3027           01230         MOVLW   B'00100111'
02C5   0080           01231         MOVWF   INDF
02C6   0A84           01232         INCF    FSR,F
                      01233 
02C7   30E8           01234         MOVLW   B'11101000'
02C8   0080           01235         MOVWF   INDF
02C9   0A84           01236         INCF    FSR,F
                      01237 
02CA   3003           01238         MOVLW   B'00000011'
02CB   0080           01239         MOVWF   INDF
02CC   0A84           01240         INCF    FSR,F
                      01241 
02CD   3064           01242         MOVLW   B'01100100'
02CE   0080           01243         MOVWF   INDF
02CF   0A84           01244         INCF    FSR,F
                      01245 
02D0   3000           01246         MOVLW   B'00000000'
02D1   0080           01247         MOVWF   INDF
02D2   0A84           01248         INCF    FSR,F
                      01249 
02D3   300A           01250         MOVLW   B'00001010'
02D4   0080           01251         MOVWF   INDF
02D5   0A84           01252         INCF    FSR,F
                      01253 
02D6   3000           01254         MOVLW   B'00000000'
02D7   0080           01255         MOVWF   INDF
02D8   0A84           01256         INCF    FSR,F
                      01257 
02D9   3001           01258         MOVLW   B'00000001'
02DA   0080           01259         MOVWF   INDF
02DB   0A84           01260         INCF    FSR,F
                      01261 
02DC   3000           01262         MOVLW   B'00000000'
02DD   0080           01263         MOVWF   INDF
                      01264 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02DE   0008           01265         RETURN
                      01266 ;=================================================================================
                      01267 ; END OF Initialize the TENS_ARR with the binary representation value
                      01268 ;=================================================================================
                      01269 
                      01270 
                      01271 ;=================================================================================
                      01272 ; DIVISION FUNCTION
                      01273 ;       add description
                      01274 ;=================================================================================
02DF                  01275 DIV:
02DF   1283 1303      01276         BANKSEL PORTA
                      01277 
02E1   01C1           01278         CLRF    QUOTIENT_HIGH
02E2   01C2           01279         CLRF    QUOTIENT_LOW
02E3   01C3           01280         CLRF    REMAINDER_HIGH
02E4   01C4           01281         CLRF    REMAINDER_LOW
                      01282 
02E5   083E           01283         MOVFW   DENOMINATOR_LOW
02E6   00C0           01284         MOVWF   COMP_DENOMINATOR_LOW
                      01285 
02E7   083D           01286         MOVFW   DENOMINATOR_HIGH
02E8   00BF           01287         MOVWF   COMP_DENOMINATOR_HIGH
                      01288 
                      01289         ; 1's comp of DENOMINATOR_LOW
02E9   09C0           01290         COMF    COMP_DENOMINATOR_LOW
                      01291 
                      01292         ; 1's comp of DENOMINATOR_HIGH
02EA   09BF           01293         COMF    COMP_DENOMINATOR_HIGH
                      01294 
                      01295         ; 2's comp of DENOMINATOR
02EB   0FC0           01296         INCFSZ  COMP_DENOMINATOR_LOW
02EC   2AEE           01297         GOTO DIV_LOOP                   ; if there is a carry, add to high byte
02ED   0ABF           01298         INCF    COMP_DENOMINATOR_HIGH
                      01299 
                      01300 
02EE                  01301 DIV_LOOP:
02EE   01E1           01302         CLRF    DIV_FLAG
                      01303         ;; increment Q
02EF   0FC2           01304         INCFSZ  QUOTIENT_LOW
02F0   2AF2           01305         GOTO    DONE_INC_Q
02F1   0AC1           01306         INCF    QUOTIENT_HIGH
                      01307         ;NOP
                      01308 
02F2                  01309 DONE_INC_Q:
                      01310 
                      01311         ; N Low = N low - D_low
02F2   0840           01312         MOVFW   COMP_DENOMINATOR_LOW
02F3   07BC           01313         ADDWF   NUMERATOR_LOW, F
                      01314 
                      01315         ; propagate carry
02F4   1C03           01316         BTFSS   STATUS, C
02F5   2AF9           01317         GOTO    COMP_HIGH
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01318 
02F6   0FBB           01319         INCFSZ  NUMERATOR_HIGH
02F7   2AF9           01320         GOTO    COMP_HIGH
                      01321 
02F8   1461           01322         BSF             DIV_FLAG, 0
                      01323 
02F9                  01324 COMP_HIGH:
                      01325         ; N High = N High - D High
02F9   083F           01326         MOVFW   COMP_DENOMINATOR_HIGH
02FA   07BB           01327         ADDWF   NUMERATOR_HIGH, F
                      01328 
02FB   1861           01329         BTFSC   DIV_FLAG, 0
02FC   2AEE           01330         GOTO    DIV_LOOP
                      01331 
                      01332         ; if no carry (N < D)
02FD   1C03           01333         BTFSS   STATUS, C
02FE   2B00           01334         GOTO    DONE
                      01335 
02FF   2AEE           01336         GOTO    DIV_LOOP
                      01337 
0300                  01338 DONE:
                      01339 
                      01340         ;; Decrement Q
                      01341         ;; check if Q low is 0
0300   3000           01342         MOVLW   0x0
0301   0642           01343         XORWF   QUOTIENT_LOW, W
0302   1903           01344         BTFSC   STATUS, Z
0303   2B06           01345         GOTO    DEC_Q_HIGH
                      01346 
0304   03C2           01347         DECF    QUOTIENT_LOW
0305   2B07           01348         GOTO    CALC_REM
                      01349 
0306                  01350 DEC_Q_HIGH:
0306   03C1           01351         DECF    QUOTIENT_HIGH
                      01352         ;;----
                      01353 
0307                  01354 CALC_REM:
                      01355         ;; Get R
                      01356         ;; R = N (current) + D
0307   083E           01357         MOVFW   DENOMINATOR_LOW
0308   073C           01358         ADDWF   NUMERATOR_LOW, W
0309   00C4           01359         MOVWF   REMAINDER_LOW
                      01360 
                      01361         ;; ?????????????
030A   1803           01362         BTFSC   STATUS, C
030B   0AC3           01363         INCF    REMAINDER_HIGH
                      01364 
030C   083D           01365         MOVFW   DENOMINATOR_HIGH
030D   073B           01366         ADDWF   NUMERATOR_HIGH, W
030E   07C3           01367         ADDWF   REMAINDER_HIGH, F
                      01368 
030F   0008           01369     RETURN
                      01370 ;=================================================================================
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01371 ; END OF DIVISION FUNCTION
                      01372 ;=================================================================================
                      01373 
                      01374 
                      01375 ;=================================================================================
                      01376 ; Display Number FUNCTION
                      01377 ;---------------------------------------------------------------------------------
                      01378 ;       argumnets: Number to display on 2 bytes: NUMERATOR_HIGH, NUMERATOR_LOW
                      01379 ;       Display to LCD
                      01380 ;=================================================================================
0310                  01381 DISPLAY_NUMBER:
                      01382 
0310   1283 1303      01383         BANKSEL PORTA
                      01384 
                      01385 
                      01386         ;; divide by 10000
0312   3010           01387         MOVLW   0x10
0313   00BE           01388         MOVWF   DENOMINATOR_LOW
0314   3027           01389         MOVLW   0x27
0315   00BD           01390         MOVWF   DENOMINATOR_HIGH
                      01391 
0316   22DF           01392         CALL    DIV
                      01393 
0317   0842           01394         MOVFW   QUOTIENT_LOW
0318   00DB           01395         MOVWF   D5
                      01396 
                      01397 ;;--------------------------------
0319   0843           01398         MOVFW   REMAINDER_HIGH
031A   00BB           01399         MOVWF   NUMERATOR_HIGH
                      01400 
031B   0844           01401         MOVFW   REMAINDER_LOW
031C   00BC           01402         MOVWF   NUMERATOR_LOW
                      01403 
                      01404         ;; divide by 1000
031D   30E8           01405         MOVLW   0xE8
031E   00BE           01406         MOVWF   DENOMINATOR_LOW
031F   3003           01407         MOVLW   0x03
0320   00BD           01408         MOVWF   DENOMINATOR_HIGH
                      01409 
0321   22DF           01410         CALL    DIV
                      01411 
0322   0842           01412         MOVFW   QUOTIENT_LOW
0323   00DC           01413         MOVWF   D4
                      01414         ;;-------------------------------
0324   0843           01415         MOVFW   REMAINDER_HIGH
0325   00BB           01416         MOVWF   NUMERATOR_HIGH
                      01417 
0326   0844           01418         MOVFW   REMAINDER_LOW
0327   00BC           01419         MOVWF   NUMERATOR_LOW
                      01420 
                      01421 
                      01422         ;; divide by 100
0328   3064           01423         MOVLW   0x64
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0329   00BE           01424         MOVWF   DENOMINATOR_LOW
032A   3000           01425         MOVLW   0x00
032B   00BD           01426         MOVWF   DENOMINATOR_HIGH
                      01427 
032C   22DF           01428         CALL    DIV
                      01429 
032D   0842           01430         MOVFW   QUOTIENT_LOW
032E   00DD           01431         MOVWF   D3
                      01432 ;;-------------------------------
                      01433 
032F   0843           01434         MOVFW   REMAINDER_HIGH
0330   00BB           01435         MOVWF   NUMERATOR_HIGH
                      01436 
0331   0844           01437         MOVFW   REMAINDER_LOW
0332   00BC           01438         MOVWF   NUMERATOR_LOW
                      01439 
                      01440         ;; divide by 10
0333   300A           01441         MOVLW   0x0A
0334   00BE           01442         MOVWF   DENOMINATOR_LOW
0335   3000           01443         MOVLW   0x00
0336   00BD           01444         MOVWF   DENOMINATOR_HIGH
                      01445 
0337   22DF           01446         CALL    DIV
                      01447 
0338   0842           01448         MOVFW   QUOTIENT_LOW
0339   00DE           01449         MOVWF   D2
                      01450 
033A   0844           01451         MOVFW   REMAINDER_LOW
033B   00DF           01452         MOVWF   D1
                      01453 
033C   1C5A           01454         BTFSS   FLAG_REGISTER, CARRY_FLAG
033D   2B6C           01455         GOTO DISPLAY
                      01456 
033E   3006           01457         MOVLW   D'6'
033F   07DF           01458         ADDWF   D1, F           ; D1 = D1 + 6
0340   300A           01459         MOVLW   D'10'
0341   025F           01460         SUBWF   D1, W
0342   1C03           01461         BTFSS   STATUS, C       ; if D1>=10
0343   2B47           01462         GOTO    D1_DONE
                      01463 
0344   300A           01464         MOVLW   D'10'
0345   02DF           01465         SUBWF   D1, F
0346   0ADE           01466         INCF    D2
                      01467 
0347                  01468 D1_DONE:
                      01469 ;------------------------
                      01470 
0347   3003           01471         MOVLW   D'3'
0348   07DE           01472         ADDWF   D2, F           ; D1 = D1 + 6
0349   300A           01473         MOVLW   D'10'
034A   025E           01474         SUBWF   D2, W
034B   1C03           01475         BTFSS   STATUS, C       ; if D1>=10
034C   2B50           01476         GOTO    D2_DONE
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01477 
034D   300A           01478         MOVLW   D'10'
034E   02DE           01479         SUBWF   D2, F
034F   0ADD           01480         INCF    D3
                      01481 
0350                  01482 D2_DONE:
                      01483 ;------------------------
                      01484 
0350   3005           01485         MOVLW   D'5'
0351   07DD           01486         ADDWF   D3, F           ; D1 = D1 + 6
0352   300A           01487         MOVLW   D'10'
0353   025D           01488         SUBWF   D3, W
0354   1C03           01489         BTFSS   STATUS, C       ; if D1>=10
0355   2B59           01490         GOTO    D3_DONE
                      01491 
0356   300A           01492         MOVLW   D'10'
0357   02DD           01493         SUBWF   D3, F
0358   0ADC           01494         INCF    D4
                      01495 
0359                  01496 D3_DONE:
                      01497 ;------------------------
0359   3005           01498         MOVLW   D'5'
035A   07DC           01499         ADDWF   D4, F           ; D1 = D1 + 6
035B   300A           01500         MOVLW   D'10'
035C   025C           01501         SUBWF   D4, W
035D   1C03           01502         BTFSS   STATUS, C       ; if D1>=10
035E   2B62           01503         GOTO    D4_DONE
                      01504 
035F   300A           01505         MOVLW   D'10'
0360   02DC           01506         SUBWF   D4, F
0361   0ADB           01507         INCF    D5
                      01508 
0362                  01509 D4_DONE:
                      01510 ;------------------------
0362   3006           01511         MOVLW   D'6'
0363   07DB           01512         ADDWF   D5, F           ; D1 = D1 + 6
0364   300A           01513         MOVLW   D'10'
0365   025B           01514         SUBWF   D5, W
0366   1C03           01515         BTFSS   STATUS, C       ; if D1>=10
0367   2B6C           01516         GOTO    D5_DONE
                      01517 
0368   300A           01518         MOVLW   D'10'
0369   02DB           01519         SUBWF   D5, F
                      01520 
036A   3001           01521         MOVLW   0x01
036B   2187           01522         CALL DISPLAY_DIGIT_WITH_INC
                      01523 
036C                  01524 D5_DONE:
                      01525 ;------------------------
036C                  01526 DISPLAY:
                      01527 
036C   085B           01528         MOVFW D5
036D   2187           01529         CALL DISPLAY_DIGIT_WITH_INC
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01530 
036E   085C           01531         MOVFW D4
036F   2187           01532         CALL DISPLAY_DIGIT_WITH_INC
                      01533 
0370   085D           01534         MOVFW D3
0371   2187           01535         CALL DISPLAY_DIGIT_WITH_INC
                      01536 
0372   085E           01537         MOVFW D2
0373   2187           01538         CALL DISPLAY_DIGIT_WITH_INC
                      01539 
0374   085F           01540         MOVFW D1
0375   2187           01541         CALL DISPLAY_DIGIT_WITH_INC
                      01542 
0376   0008           01543     RETURN
                      01544 
                      01545 ;=================================================================================
                      01546 ; END OF Display Number FUNCTION
                      01547 ;=================================================================================
                      01548 
                      01549 ;=================================================================================
                      01550 ; ADDITION FUNCTION
                      01551 ;=================================================================================
0377                  01552 ADD:
0377   1283 1303      01553         BANKSEL PORTA
0379   01D7           01554         CLRF    RESULT1_LOW
037A   01D6           01555         CLRF    RESULT1_HIGH
037B   105A           01556         BCF             FLAG_REGISTER, CARRY_FLAG
                      01557 
037C   082C           01558         MOVFW   NUM1_HIGH
037D   00D6           01559         MOVWF   RESULT1_HIGH
                      01560 
037E   082D           01561         MOVFW   NUM1_LOW
037F   00D7           01562         MOVWF   RESULT1_LOW
0380   082F           01563         MOVFW   NUM2_LOW
0381   07D7           01564         ADDWF   RESULT1_LOW, F
                      01565 
0382   1C03           01566         BTFSS   STATUS, C
0383   2B87           01567         GOTO    ADD_NUM2_HIGH_BYTE
                      01568 
0384   0FD6           01569         INCFSZ  RESULT1_HIGH
0385   2B87           01570         GOTO    ADD_NUM2_HIGH_BYTE
                      01571 
0386   145A           01572         BSF             FLAG_REGISTER, CARRY_FLAG
                      01573 
                      01574 
0387                  01575 ADD_NUM2_HIGH_BYTE:
0387   082E           01576         MOVFW   NUM2_HIGH
0388   07D6           01577         ADDWF   RESULT1_HIGH, F
                      01578 
0389   1803           01579         BTFSC   STATUS, C
038A   145A           01580         BSF             FLAG_REGISTER, CARRY_FLAG
                      01581 
038B   0008           01582         RETURN
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01583 ;=================================================================================
                      01584 ; END OF ADDITION FUNCTION
                      01585 ;=================================================================================
                      01586 
                      01587 ;=================================================================================
                      01588 ; CALCULATE RESULT
                      01589 ;=================================================================================
038C                  01590 CALCULATE_RESULT:
038C   1283 1303      01591         BANKSEL PORTA
                      01592 
038E   3000           01593         MOVLW   0x00
038F   0639           01594         XORWF   OP, W
0390   1903           01595         BTFSC   STATUS, Z
0391   2B93           01596         GOTO    ADD_OP
                      01597 
0392   2B9B           01598         GOTO    DIV_NUMS
                      01599 
0393                  01600 ADD_OP:
0393   2377           01601         CALL    ADD
0394   0856           01602         MOVFW   RESULT1_HIGH
0395   00BB           01603         MOVWF   NUMERATOR_HIGH
0396   0857           01604         MOVFW   RESULT1_LOW
0397   00BC           01605         MOVWF   NUMERATOR_LOW
0398   2310           01606         CALL    DISPLAY_NUMBER
0399   105A           01607         BCF             FLAG_REGISTER, CARRY_FLAG
039A   0008           01608         RETURN
                      01609 
039B                  01610 DIV_NUMS:
039B   3000           01611         MOVLW   0x00
039C   062E           01612         XORWF   NUM2_HIGH, W
039D   1D03           01613         BTFSS   STATUS, Z
039E   2BA3           01614         GOTO    PROCESS_DIV
                      01615 
039F   3000           01616         MOVLW   0x00
03A0   062F           01617         XORWF   NUM2_LOW, W
03A1   1903           01618         BTFSC   STATUS, Z
03A2   23CA           01619         CALL    PRINT_DIV_ERR
                      01620 
03A3                  01621 PROCESS_DIV:
03A3   082D           01622         MOVFW   NUM1_LOW
03A4   00BC           01623         MOVWF   NUMERATOR_LOW
                      01624 
03A5   082C           01625         MOVFw   NUM1_HIGH
03A6   00BB           01626         MOVWF   NUMERATOR_HIGH
                      01627 
03A7   082F           01628         MOVFW   NUM2_LOW
03A8   00BE           01629         MOVWF   DENOMINATOR_LOW
                      01630 
03A9   082E           01631         MOVFW   NUM2_HIGH
03AA   00BD           01632         MOVWF   DENOMINATOR_HIGH
                      01633 
03AB   22DF           01634         CALL    DIV
                      01635 
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03AC   0843           01636         MOVFW   REMAINDER_HIGH
03AD   00E0           01637         MOVWF   TEMP2
                      01638 
03AE   0844           01639         MOVFW   REMAINDER_LOW
03AF   00B3           01640         MOVWF   TEMP
                      01641 
03B0   3002           01642         MOVLW   0x02
03B1   0639           01643         XORWF   OP, W
03B2   1903           01644         BTFSC   STATUS, Z
03B3   2BC4           01645         GOTO    MOD_OP
                      01646 
03B4   1674           01647         BSF             Select, RS
03B5   3051           01648         MOVLW   'Q'
03B6   20AB           01649         CALL    send
03B7   303D           01650         MOVLW   '='
03B8   20AB           01651         CALL    send
                      01652 
                      01653 
                      01654 
03B9   0841           01655         MOVFW   QUOTIENT_HIGH
03BA   00BB           01656         MOVWF   NUMERATOR_HIGH
03BB   0842           01657         MOVFW   QUOTIENT_LOW
03BC   00BC           01658         MOVWF   NUMERATOR_LOW
03BD   2310           01659         CALL    DISPLAY_NUMBER
                      01660 
03BE   3020           01661         MOVLW   ' '
03BF   20AB           01662         CALL    send
03C0   3052           01663         MOVLW   'R'
03C1   20AB           01664         CALL    send
03C2   303D           01665         MOVLW   '='
03C3   20AB           01666         CALL    send
                      01667 
03C4                  01668 MOD_OP:
03C4   0860           01669         MOVFW   TEMP2
03C5   00BB           01670         MOVWF   NUMERATOR_HIGH
03C6   0833           01671         MOVFW   TEMP
03C7   00BC           01672         MOVWF   NUMERATOR_LOW
03C8   2310           01673         CALL    DISPLAY_NUMBER
                      01674 
03C9   0008           01675         RETURN
                      01676 
                      01677 
                      01678 ;=================================================================================
                      01679 ; END OF CALCULATE RESULT
                      01680 ;=================================================================================
                      01681 
                      01682 
                      01683 ;=================================================================================
                      01684 ; DISPLAY DIV BY ZERO ERRO MESSAG
                      01685 ;=================================================================================
03CA                  01686 PRINT_DIV_ERR:
03CA   1674           01687         BSF             Select, RS
03CB   3045           01688         MOVLW   'E'
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03CC   20AB           01689         CALL    send
03CD   3052           01690         MOVLW   'R'
03CE   20AB           01691         CALL    send
03CF   3052           01692         MOVLW   'R'
03D0   20AB           01693         CALL    send
03D1   3021           01694         MOVLW   '!'
03D2   20AB           01695         CALL    send
03D3   3020           01696         MOVLW   ' '
03D4   20AB           01697         CALL    send
03D5   3044           01698         MOVLW   'D'
03D6   20AB           01699         CALL    send
03D7   3049           01700         MOVLW   'I'
03D8   20AB           01701         CALL    send
03D9   3056           01702         MOVLW   'V'
03DA   20AB           01703         CALL    send
03DB   3020           01704         MOVLW   ' '
03DC   20AB           01705         CALL    send
03DD   3042           01706         MOVLW   'B'
03DE   20AB           01707         CALL    send
03DF   3059           01708         MOVLW   'Y'
03E0   20AB           01709         CALL    send
03E1   3020           01710         MOVLW   ' '
03E2   20AB           01711         CALL    send
03E3   3030           01712         MOVLW   '0'
03E4   20AB           01713         CALL    send
03E5   0008           01714         RETURN
                      01715 ;=================================================================================
                      01716 ; END OF DISPLAY DIV BY ZERO ERRO MESSAG
                      01717 ;=================================================================================
                      01718 
                      01719         END
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADD                               00000377
ADDEN                             00000003
ADD_NUM2_HIGH_BYTE                00000387
ADD_OP                            00000393
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BACK_B                            0000004D
BACK_T                            0000007F
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BLINK_CURSOR                      000000E5
BRGH                              00000002
BUTTON_INT                        00000033
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CALCULATE_RESULT                  0000038C
CALC_REM                          00000307
CARRY_FLAG                        00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHECK_BUTTON                      0000002C
CHECK_CLICKS                      00000242
CHECK_CLICKS_END                  00000251
CHECK_MAX                         0000016B
CHECK_TIMER                       0000002E
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CIS                               00000003
CKE                               00000006
CKP                               00000004
CLICK_CNT                         0000003A
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
COMP_DENOMINATOR_HIGH             0000003F
COMP_DENOMINATOR_LOW              00000040
COMP_HIGH                         000002F9
CREN                              00000004
CSRC                              00000007
CURR_ARR_IND                      0000002B
CURR_DISPLAY                      00000034
CURR_TENS_ARR_IND                 00000050
CURSOR_POS                        00000022
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
Char                              00000021
D                                 00000005
D1                                0000005F
D1_DONE                           00000347
D2                                0000005E
D2_DONE                           00000350
D3                                0000005D
D3_DONE                           00000359
D4                                0000005C
D4_DONE                           00000362
D5                                0000005B
D5_DONE                           0000036C
DATA_ADDRESS                      00000005
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 39


SYMBOL TABLE
  LABEL                             VALUE 

DC                                00000001
DEACTIVATE_TIMER                  00000209
DEC_Q_HIGH                        00000306
DENOMINATOR_HIGH                  0000003D
DENOMINATOR_LOW                   0000003E
DIG_CNT                           00000030
DIG_VAL                           00000023
DISPLAY                           0000036C
DISPLAY_DIGIT                     0000017B
DISPLAY_DIGIT_WITH_INC            00000187
DISPLAY_NUMBER                    00000310
DISPLAY_OP                        000001A2
DISPLAY_RESULT                    000001BD
DISPLAY_RES_NUM                   000001EE
DIV                               000002DF
DIV_FLAG                          00000061
DIV_LOOP                          000002EE
DIV_NUMS                          0000039B
DONE                              00000300
DONE_INC_Q                        000002F2
D_A                               00000005
D_NOT_A                           00000005
E                                 00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FIRST_DIGIT                       00000286
FLAG_REGISTER                     0000005A
FSR                               00000004
GCEN                              00000007
GET_OP                            0000019F
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
HAS_MAX                           00000024
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INC_DIGIT                         0000015C
INC_OP                            0000018B
INDF                              00000000
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

INIT_MAX_ARR                      00000148
INIT_OP_ARR                       000001AF
INIT_TENS_ARR                     000002BC
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
INT_END                           00000090
IRP                               00000007
ISR                               0000002A
IS_EQ                             00000031
IS_MAX                            00000025
LED_TURN_OFF_B                    00000109
LED_TURN_OFF_T                    00000101
LED_TURN_ON_B                     00000105
LED_TURN_ON_T                     000000FD
LOOP_CNT                          00000032
MAX_ARR_IND                       00000026
MOD_OP                            000003C4
NEXT_DIGIT                        00000279
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_NUM1                          00000077
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NUM1_HIGH                         0000002C
NUM1_LOW                          0000002D
NUM2_HIGH                         0000002E
NUM2_LOW                          0000002F
NUMERATOR_HIGH                    0000003B
NUMERATOR_LOW                     0000003C
NUM_OF_OVERFLOWS                  0000001E
OBF                               00000006
OERR                              00000001
OP                                00000039
OPERAND1_HIGH                     00000052
OPERAND1_LOW                      00000053
OPERAND2_HIGH                     00000054
OPERAND2_LOW                      00000055
OPTION_REG                        00000081
OP_AFTER_KEEP                     00000253
OP_ARR                            00000035
OP_ARR_IND                        00000038
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 41


SYMBOL TABLE
  LABEL                             VALUE 

OP_ARR_TAIL                       00000037
OutCod                            00000075
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRINT_DIV_ERR                     000003CA
PRINT_ENTER_OPERATION             0000010D
PROCESS_CURRENT_DIGIT             0000028F
PROCESS_DIV                       000003A3
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
Point                             00000073
QUOTIENT_HIGH                     00000041
QUOTIENT_LOW                      00000042
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 42


SYMBOL TABLE
  LABEL                             VALUE 

RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
REACTIVATE_TIMER                  00000249
READ_WRITE                        00000002
REMAINDER_HIGH                    00000043
REMAINDER_LOW                     00000044
RESET_INDEX                       0000019B
RESULT1_HIGH                      00000056
RESULT1_LOW                       00000057
RESULT2_HIGH                      00000058
RESULT2_LOW                       00000059
RP0                               00000005
RP1                               00000006
RS                                00000004
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SEN                               00000000
SKIP_INT_T                        0000008A
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 43


SYMBOL TABLE
  LABEL                             VALUE 

SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
Select                            00000074
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TCNT                              00000020
TEMP                              00000033
TEMP2                             00000060
TENS_ARR                          00000045
TENS_LOOP_START1                  0000029E
TENS_LOOP_START2                  000002AD
TENS_TEMP                         00000051
THREE_SEC_DELAY                   00000088
TIMER_HANDLING                    00000059
TIMER_INT                         00000051
TIMER_KEEP_STAGE                  000001FB
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 44


SYMBOL TABLE
  LABEL                             VALUE 

TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
Timer1                            00000070
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 45


SYMBOL TABLE
  LABEL                             VALUE 

TimerX                            00000071
UA                                00000001
Var                               00000072
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_CP_ON                            00001FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
__16F877A                         00000001
__DEBUG                           1
inid                              000000BE
init                              00000005
loop                              000000FC
loop1                             00000095
loopX                             0000009A
MPASM  5.43                       PROJECT.ASM   7-26-2023  20:07:01         PAGE 46


SYMBOL TABLE
  LABEL                             VALUE 

onems                             00000093
pulseE                            0000009E
send                              000000AB
start                             000000E9
xms                               00000099


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXX---------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   995
Program Memory Words Free:  7197


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,    35 suppressed

